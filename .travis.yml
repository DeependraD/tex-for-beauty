language: r
sudo: true
dist: xenial
latex: false
pandoc: false
warnings_are_errors: false
cache:
        directories:
                - /tmp/texlive
                - $HOME/.TinyTeX
                - $HOME/.texlive
install: echo "Nothing occurs at installation, only script"
script:
        - mkdir _build
        - Rscript install_texlive.R
        - Rscript -e 'tinytex::pdflatex(list.files(path = "cv/", pattern = "\\.tex$")[1], bib_engine = "biber")'
branches:
          - master
deploy:
        provider: releases
        skip_cleanup: true 
        api_key:
              secure: <generated by `travis setup releases>
        file: 
                - Rscript -e 'paste0("_build/", list.files(pattern = "\\.pdf$"))'
        on:
                rep: DeependraD/tex-for-beauty
                tags: true
