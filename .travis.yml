language: r
sudo: true
dist: xenial
latex: false
pandoc: false
warnings_are_errors: false
cache:
        directories:
                - /tmp/texlive
                - $HOME/.TinyTeX
                - $HOME/.texlive
install: echo "Nothing occurs at installation, only script"
script:
        - mkdir _build
        - Rscript install_texlive.R
        - Rscript -e 'tinytex::pdflatex("cv/Deependra_CV.tex", bib_engine = "biber", engine_args = "--no-shell-escape")'
        - Rscript -e 'tinytex::pdflatex("cv/Deependra_CV_simple.tex", bib_engine = "biber", engine_args = "--no-shell-escape")'
branches:
          - master
deploy:
        provider: releases
        skip_cleanup: true 
        api_key:
              secure: <generated by `travis setup releases>
        file: 
                - _build/Deependra_CV.pdf
                - _build/Deependra_CV_simple.pdf
        on:
                rep: DeependraD/tex-for-beauty
                tags: true
